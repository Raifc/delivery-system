<% if (@company.errors.any?) %>
  <p>Please check the errors below</p>
  <ul>
    <% @company.errors.full_messages.each do |msg| %>
      <li id='new_errors'><%= msg %></li>
    <% end %>
    <% @address.errors.full_messages.each do |msg| %>
      <li id='new_errors'><%= msg %></li>
    <% end %>
    <% @email_domain.errors.full_messages.each do |msg| %>
      <li id='new_errors'><%= msg %></li>
    <% end %>
  </ul>
<% end %>

<%= form_with(model: @company) do |f| %>

  <div>
    <%= f.label :corporate_name %>
    <%= f.text_field :corporate_name %>
  </div>

  <div>
    <%= f.label :trading_name %>
    <%= f.text_field :trading_name %>
  </div>

  <div>
    <%= f.label :registration_number %>
    <%= f.text_field :registration_number %>
  </div>

  <%= fields_for :address, @company.address do |address_form| %>
    <div>
      <%= address_form.label :full_address %>
      <%= address_form.text_field :full_address %>
    </div>

    <div>
      <%= address_form.label :city %>
      <%= address_form.text_field :city %>
    </div>

    <div>
      <%= address_form.label :state %>
      <%= address_form.text_field :state %>
    </div>
  <% end %>

  <%= fields_for :email_domain, @company.email_domain do |email_domain| %>
    <div>
      <%= email_domain.label :domain %>
      <%= email_domain.text_field :domain %>
    </div>
  <% end %>


  <div>
    <%= f.label :status %>
    <%= f.select(:status, Company.statuses.keys) %>
  </div>

  <%= f.submit 'Submit' %>

<% end %>